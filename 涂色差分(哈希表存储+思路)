#include<bits/stdc++.h>
using namespace std;
int main(){
	int row,col,q,clear;
	long long ans=0;
	cin>>row>>col>>q>>clear;
    int x,y;
    int len=max(row,col);
    vector<vector<int>>diff(2,vector<int>(len+1,0));
    for(int i=0;i<q;i++){
    	cin>>x>>y;
    	if(x==1)diff[0][y]++;
		else diff[1][y]++;
	}
	map<int,int>memo;
	for(int i=0;i<row;i++){
		memo[diff[0][i+1]%clear]++;
	}
	for(int j=0;j<col;j++){
		diff[1][j+1]%=clear;
		if(diff[1][j+1]){
		long long chazhi=clear-diff[1][j+1];
		long long num=memo[chazhi];
		ans+=row-num;
	    }
		else{
		long long num=memo[0];
		ans+=row-num;
	    }
	}
	cout<<ans;
	return 0;
} 
